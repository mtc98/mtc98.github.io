<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>五指棋快速測試</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: #f0f0f0;
        }
        .test-container {
            background: white;
            padding: 20px;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .game-frame {
            border: 2px solid #333;
            border-radius: 10px;
            margin: 20px 0;
        }
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #5a67d8;
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: bold;
        }
        .success {
            background: #d4edda;
            color: #155724;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <h1>五指棋遊戲修復測試</h1>
    
    <div class="test-container">
        <h2>🎮 遊戲預覽</h2>
        <iframe src="index.html" width="100%" height="600" class="game-frame"></iframe>
    </div>
    
    <div class="test-container">
        <h2>🔧 修復內容</h2>
        <div class="status success">
            <h3>已修復的問題：</h3>
            <ul>
                <li>✅ 添加了棋盤格線樣式</li>
                <li>✅ 改善了棋子顯示效果</li>
                <li>✅ 修復了腳本載入順序</li>
                <li>✅ 增強了棋盤視覺對比度</li>
                <li>✅ 改善了棋子定位和大小</li>
            </ul>
        </div>
        
        <div class="status info">
            <h3>遊戲特色：</h3>
            <ul>
                <li>🎯 15×15標準棋盤</li>
                <li>🤖 智慧AI對手</li>
                <li>🔊 音效系統</li>
                <li>📱 響應式設計</li>
                <li>⌨️ 快捷鍵支援</li>
            </ul>
        </div>
    </div>
    
    <div class="test-container">
        <h2>📋 測試檢查清單</h2>
        <button class="test-button" onclick="checkVisualElements()">檢查視覺元素</button>
        <button class="test-button" onclick="checkGameLogic()">檢查遊戲邏輯</button>
        <button class="test-button" onclick="checkAI()">檢查AI功能</button>
        
        <div id="testResults" style="margin-top: 20px;"></div>
    </div>
    
    <div class="test-container">
        <h2>📖 操作說明</h2>
        <ol>
            <li><strong>開始遊戲：</strong>點擊棋盤任意位置下黑棋</li>
            <li><strong>電腦回應：</strong>電腦會自動下白棋</li>
            <li><strong>繼續遊戲：</strong>輪流下棋直到連成五子</li>
            <li><strong>悔棋：</strong>點擊「悔棋」按鈕（可悔兩步）</li>
            <li><strong>重新開始：</strong>點擊「重新開始」按鈕</li>
        </ol>
        
        <h3>⌨️ 快捷鍵：</h3>
        <ul>
            <li><kbd>Ctrl</kbd> + <kbd>R</kbd>：重新開始</li>
            <li><kbd>Ctrl</kbd> + <kbd>Z</kbd>：悔棋</li>
            <li><kbd>Ctrl</kbd> + <kbd>S</kbd>：切換音效</li>
        </ul>
    </div>

    <script>
        function addTestResult(message, type = 'info') {
            const resultsDiv = document.getElementById('testResults');
            const resultDiv = document.createElement('div');
            resultDiv.className = `status ${type}`;
            resultDiv.innerHTML = `<strong>${new Date().toLocaleTimeString()}:</strong> ${message}`;
            resultsDiv.appendChild(resultDiv);
        }

        function checkVisualElements() {
            addTestResult('檢查視覺元素...', 'info');
            
            // 檢查棋盤格線
            const iframe = document.querySelector('iframe');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const boardCells = iframeDoc.querySelectorAll('.board-cell');
                const gamePieces = iframeDoc.querySelectorAll('.game-piece');
                
                if (boardCells.length > 0) {
                    addTestResult(`✅ 棋盤格線正常顯示 (${boardCells.length}個格子)`, 'success');
                } else {
                    addTestResult('❌ 棋盤格線顯示異常', 'error');
                }
                
                if (gamePieces.length >= 0) {
                    addTestResult(`✅ 棋子渲染系統正常 (${gamePieces.length}個棋子)`, 'success');
                }
                
            } catch (error) {
                addTestResult('檢查過程中發生錯誤: ' + error.message, 'error');
            }
        }

        function checkGameLogic() {
            addTestResult('檢查遊戲邏輯...', 'info');
            
            try {
                // 嘗試訪問遊戲物件
                const iframe = document.querySelector('iframe');
                const iframeWindow = iframe.contentWindow;
                
                if (iframeWindow.game) {
                    const game = iframeWindow.game;
                    addTestResult('✅ 遊戲物件載入成功', 'success');
                    addTestResult(`📊 棋盤大小: ${game.board.size}×${game.board.size}`, 'success');
                    addTestResult(`🎮 當前玩家: ${game.currentPlayer === 1 ? '人類' : '電腦'}`, 'success');
                } else {
                    addTestResult('❌ 遊戲物件載入失敗', 'error');
                }
                
            } catch (error) {
                addTestResult('遊戲邏輯檢查失敗: ' + error.message, 'error');
            }
        }

        function checkAI() {
            addTestResult('檢查AI功能...', 'info');
            
            try {
                const iframe = document.querySelector('iframe');
                const iframeWindow = iframe.contentWindow;
                
                if (iframeWindow.AI) {
                    addTestResult('✅ AI類別載入成功', 'success');
                    
                    // 嘗試創建AI實例進行測試
                    const testBoard = iframeWindow.game ? iframeWindow.game.board : null;
                    if (testBoard) {
                        const ai = new iframeWindow.AI(testBoard);
                        const move = ai.getBestMove();
                        if (move) {
                            addTestResult(`🤖 AI建議移動: 行${move.row}, 列${move.col}`, 'success');
                        }
                    }
                } else {
                    addTestResult('❌ AI類別載入失敗', 'error');
                }
                
            } catch (error) {
                addTestResult('AI檢查失敗: ' + error.message, 'error');
            }
        }

        // 自動檢查
        setTimeout(() => {
            checkVisualElements();
            setTimeout(checkGameLogic, 1000);
            setTimeout(checkAI, 2000);
        }, 2000);
    </script>
</body>
</html>